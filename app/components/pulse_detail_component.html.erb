<%= tag.turbo_frame id: :pulse_details do %>
  <div class="d-flex flex-column gap-2">
    <div class="d-flex gap-4">
      <div class="w-100">
        <table class="table table-hover table-sm table-striped">
          <thead>
            <tr>
              <th colspan="2">Request Details</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <tr>
              <td><span class="rounded p-1 <%= http_tag(@pulse.http_method) %>"><%= @pulse.http_method %></span></td>
              <td><%= pulse_request_url(pool_id) %></td>
            </tr>
            <tr>
              <td>Host</td>
              <td><%= @pulse.ip %></td>
            </tr>
            <tr>
              <td>Date</td>
              <td><%= l(@pulse.created_at, format: :with_sec) %> UTC - (<%= time_ago_in_words(@pulse.created_at) %> ago)</td>
            </tr>
            <tr>
              <td>Size</td>
              <td><%= @pulse.size %> bytes</td>
            </tr>
            <tr>
              <td>ID</td>
              <td><%= @pulse.hashid %></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="w-100">
        <table class="table table-hover table-sm table-striped">
          <thead>
            <tr>
              <th colspan="2">Headers</th>
            </tr>
          </thead>
          <tbody class="table-group-divider">
            <% @pulse.headers.each do |key, value| %>
              <tr>
                <td><%= key.gsub(/^HTTP_/, '').downcase %></td>
                <td><%= value %></td>
              </tr>
            <% end %>
            <tr>
              <td>content-type</td>
              <td><%= @pulse.content_type %></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <h5>Body</h5>
    <div class="bg-light rounded p-2">
      <%= @pulse.body %>
    </div>
  </div>
<% end %>
